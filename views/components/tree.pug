mixin treeShow
    block script
        script(type='text/javascript' src=__PLUGINS_PATH__ +'/ztree/jquery.ztree.all.min.js')
        script(type='text/javascript').
            var zTree;
            var setting = {
                view: {
                    dblClickExpand: false,
                    showLine: true,
                    selectedMulti: false
                },
                data: {
                    simpleData: {
                        enable: true,
                        idKey: "id",
                        pIdKey: "pId",
                        rootPId: ""
                    }
                },
                callback: {
                    beforeClick: function (treeId, treeNode) {
                        var zTree = $.fn.zTree.getZTreeObj("tree");
                        if (treeNode.isParent) {
                            zTree.expandNode(treeNode);
                            return false;
                        } else {
                            return true;
                        }
                    },
                    beforeMouseDown: beforeMouseDown,
                    beforeMouseUp: beforeMouseUp,
                    beforeRightClick: beforeRightClick,
                    onMouseDown: onMouseDown,
                    onMouseUp: onMouseUp,
                    onRightClick: onRightClick
                }
            };

            var zNodes = [
                {id: 1, pId: 0, name: "水果", open: true},
                {id: 101, pId: 1, name: "苹果"},
                {id: 102, pId: 1, name: "香蕉"},
                {id: 103, pId: 1, name: "梨"},
                {id: 10101, pId: 101, name: "红富士苹果"},
                {id: 10102, pId: 101, name: "红星苹果"},
                {id: 10103, pId: 101, name: "嘎拉"},
                {id: 10104, pId: 101, name: "桑萨"},
                {id: 10201, pId: 102, name: "千层蕉"},
                {id: 10202, pId: 102, name: "仙人蕉"},
                {id: 10203, pId: 102, name: "吕宋蕉"}
            ];

            var log, className = {down: "dark", up: "dark", right: "dark"};
            function beforeMouseDown(treeId, treeNode) {
                className.down = (className.down === "dark" ? "" : "dark");
                console.log('beforeMouseDown');
                return (!treeNode || treeNode.down != false);
            }
            function onMouseDown(event, treeId, treeNode) {
                console.log('onMouseDown');
            }
            function beforeMouseUp(treeId, treeNode) {
                console.log('beforeMouseUp');
                className.up = (className.up === "dark" ? "" : "dark");
                return (!treeNode || treeNode.up != false);
            }
            function onMouseUp(event, treeId, treeNode) {
                console.log('onMouseUp');
            }
            function beforeRightClick(treeId, treeNode) {
                className.right = (className.right === "dark" ? "" : "dark");
                console.log(treeId,treeNode);
                return (!treeNode || treeNode.right != false);
            }
            function onRightClick(event, treeId, treeNode) {
                console.log('onRightClick');
            }

            function getTime() {
                var now = new Date(),
                    h = now.getHours(),
                    m = now.getMinutes(),
                    s = now.getSeconds(),
                    ms = now.getMilliseconds();
                return (h + ":" + m + ":" + s + " " + ms);
            }

            $(document).ready(function () {
                var t = $("#tree");
                t = $.fn.zTree.init(t, setting, zNodes);
            });


